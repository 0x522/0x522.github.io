<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>DockeråŸç†åŠå…¶åº”ç”¨ - </title><meta name="Description" content="è¿™æ˜¯æˆ‘çš„å…¨æ–° Hugo ç½‘ç«™"><meta property="og:title" content="DockeråŸç†åŠå…¶åº”ç”¨" />
<meta property="og:description" content="Docker ä»€ä¹ˆæ˜¯ docker Docker æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œç”¨äºå¼€å‘åº”ç”¨ã€äº¤ä»˜ï¼ˆshippingï¼‰åº”ç”¨ã€è¿è¡Œåº”ç”¨ã€‚ Docker å…è®¸ç”¨æˆ·å°†åŸºç¡€è®¾æ–½ï¼ˆInfrast" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" />
<meta property="og:image" content="/logo.png"/>
<meta property="article:published_time" content="2020-10-19T16:06:55+08:00" />
<meta property="article:modified_time" content="2020-10-19T16:06:55+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/logo.png"/>

<meta name="twitter:title" content="DockeråŸç†åŠå…¶åº”ç”¨"/>
<meta name="twitter:description" content="Docker ä»€ä¹ˆæ˜¯ docker Docker æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œç”¨äºå¼€å‘åº”ç”¨ã€äº¤ä»˜ï¼ˆshippingï¼‰åº”ç”¨ã€è¿è¡Œåº”ç”¨ã€‚ Docker å…è®¸ç”¨æˆ·å°†åŸºç¡€è®¾æ–½ï¼ˆInfrast"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" /><link rel="prev" href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" /><link rel="next" href="/ajax/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "DockeråŸç†åŠå…¶åº”ç”¨",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8\/"
        },"genre": "posts","wordcount":  2330 ,
        "url": "\/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8\/","datePublished": "2020-10-19T16:06:55+08:00","dateModified": "2020-10-19T16:06:55+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "ä½œè€…"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title=""><span class="header-title-pre">âœ¨</span>Welcome to the House from Chenyuntao<span class="header-title-post">âœ¨</span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">ğŸ“‹ æ–‡ç«  </a><a class="menu-item" href="/" title="è®¿é—®åšå®¢ä¸»é¡µ">ğŸˆ Back </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="è¯·è¾“å…¥æŸ¥æ‰¾ä¿¡æ¯" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title=""><span class="header-title-pre">âœ¨</span>Welcome to the House from Chenyuntao<span class="header-title-post">âœ¨</span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="è¯·è¾“å…¥æŸ¥æ‰¾ä¿¡æ¯" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">ğŸ“‹æ–‡ç« </a><a class="menu-item" href="/" title="è®¿é—®åšå®¢ä¸»é¡µ">ğŸˆBack</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">DockeråŸç†åŠå…¶åº”ç”¨</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>ä½œè€…</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-10-19">2020-10-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2330 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="true">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#ä»€ä¹ˆæ˜¯-docker">ä»€ä¹ˆæ˜¯ docker</a></li>
    <li><a href="#docker-å¼•æ“">Docker å¼•æ“</a></li>
    <li><a href="#docker-å¯¹è±¡">Docker å¯¹è±¡</a></li>
    <li><a href="#docker-èƒ½åšä»€ä¹ˆ">Docker èƒ½åšä»€ä¹ˆ</a></li>
    <li><a href="#docker-çš„åŸºæœ¬æ¦‚å¿µ">Docker çš„åŸºæœ¬æ¦‚å¿µ</a>
      <ul>
        <li><a href="#docker-å¯¹æ¯”-vm">docker å¯¹æ¯” VM</a></li>
        <li><a href="#docker-pullimages">docker pull/images</a></li>
        <li><a href="#docker-runps">docker run/ps</a>
          <ul>
            <li><a href="#docker-run">docker run</a></li>
          </ul>
        </li>
        <li><a href="#docker-startstop">docker start/stop</a></li>
        <li><a href="#docker-rm">docker rm</a></li>
        <li><a href="#docker-exec">docker exec</a></li>
        <li><a href="#docker-logs">docker logs</a></li>
        <li><a href="#docker-inspect">docker inspect</a></li>
      </ul>
    </li>
    <li><a href="#docker-åˆ†å±‚çš„é•œåƒ">Docker åˆ†å±‚çš„é•œåƒ</a>
      <ul>
        <li><a href="#dockerfile">Dockerfile</a></li>
        <li><a href="#docker-çš„é•œåƒä»“åº“ä¸-tag">Docker çš„é•œåƒä»“åº“ä¸ tag</a></li>
      </ul>
    </li>
    <li><a href="#docker-ä¸-kubernetesk8s">Docker ä¸ Kubernetes(k8s)</a>
      <ul>
        <li><a href="#k8s">k8s</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="docker">Docker</h1>
<h2 id="ä»€ä¹ˆæ˜¯-docker">ä»€ä¹ˆæ˜¯ docker</h2>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œç”¨äºå¼€å‘åº”ç”¨ã€äº¤ä»˜ï¼ˆshippingï¼‰åº”ç”¨ã€è¿è¡Œåº”ç”¨ã€‚ Docker å…è®¸ç”¨æˆ·å°†åŸºç¡€è®¾æ–½ï¼ˆInfrastructureï¼‰ä¸­çš„åº”ç”¨å•ç‹¬åˆ†å‰²å‡ºæ¥ï¼Œå½¢æˆæ›´å°çš„é¢—ç²’ï¼ˆå®¹å™¨ï¼‰ï¼Œä»è€Œæé«˜äº¤ä»˜è½¯ä»¶çš„é€Ÿåº¦ã€‚<br>
Docker å®¹å™¨ä¸è™šæ‹Ÿæœºç±»ä¼¼ï¼Œä½†äºŒè€…åœ¨åŸç†ä¸Šä¸åŒã€‚å®¹å™¨æ˜¯å°†æ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–ï¼Œè™šæ‹Ÿæœºåˆ™æ˜¯è™šæ‹ŸåŒ–ç¡¬ä»¶ï¼Œå› æ­¤å®¹å™¨æ›´å…·æœ‰ä¾¿æºæ€§ã€é«˜æ•ˆåœ°åˆ©ç”¨æœåŠ¡å™¨ã€‚ å®¹å™¨æ›´å¤šçš„ç”¨äºè¡¨ç¤º è½¯ä»¶çš„ä¸€ä¸ªæ ‡å‡†åŒ–å•å…ƒã€‚ç”±äºå®¹å™¨çš„æ ‡å‡†åŒ–ï¼Œå› æ­¤å®ƒå¯ä»¥æ— è§†åŸºç¡€è®¾æ–½ï¼ˆInfrastructureï¼‰çš„å·®å¼‚ï¼Œéƒ¨ç½²åˆ°ä»»ä½•ä¸€ä¸ªåœ°æ–¹ã€‚å¦å¤–ï¼ŒDocker ä¹Ÿä¸ºå®¹å™¨æä¾›æ›´å¼ºçš„ä¸šç•Œçš„éš”ç¦»å…¼å®¹ã€‚<br>
<strong>Docker åˆ©ç”¨ Linux æ ¸å¿ƒä¸­çš„èµ„æºåˆ†ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚ cgroupsï¼Œä»¥åŠ Linux æ ¸å¿ƒåå­—ç©ºé—´ï¼ˆnamespacesï¼‰ï¼Œæ¥åˆ›å»ºç‹¬ç«‹çš„å®¹å™¨ï¼ˆcontainersï¼‰ã€‚</strong></p>
<h2 id="docker-å¼•æ“">Docker å¼•æ“</h2>
<p>Docker å¼•æ“(Docker Engine)æ˜¯ä¸€ä¸ªæœåŠ¡ç«¯-å®¢æˆ·ç«¯ç»“æ„çš„åº”ç”¨ï¼Œä¸»è¦æœ‰è¿™äº›éƒ¨åˆ†ï¼šDocker å®ˆæŠ¤è¿›ç¨‹ã€Docker Engine AP é¡µé¢å­˜æ¡£å¤‡ä»½ï¼Œå­˜äºäº’è”ç½‘æ¡£æ¡ˆé¦†ã€Docker å®¢æˆ·ç«¯ã€‚<br></p>
<ul>
<li>Docker å®ˆæŠ¤è¿›ç¨‹(Docker daemons)ï¼Œä¹Ÿå« dockerd ï¼Œæ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„è¿›ç¨‹ï¼Œç”¨æˆ·ç®¡ç†å®¹å™¨ã€‚å®ˆæŠ¤è¿›ç¨‹ä¼šç›‘å¬ Docker Engine API é¡µé¢å­˜æ¡£å¤‡ä»½ï¼Œå­˜äºäº’è”ç½‘æ¡£æ¡ˆé¦† çš„è¯·æ±‚ã€‚</li>
<li>Docker Engine API é¡µé¢å­˜æ¡£å¤‡ä»½ï¼Œå­˜äºäº’è”ç½‘æ¡£æ¡ˆé¦†æ˜¯ç”¨äºä¸ Docker å®ˆæŠ¤è¿›ç¨‹äº¤äº’ç”¨çš„çš„ APIã€‚å®ƒæ˜¯ä¸€ä¸ª RESTful APIï¼Œå› æ­¤å®ƒä¸ä»…å¯ä»¥è¢« Docker å®¢æˆ·ç«¯è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢« wget å’Œ curl ç­‰å‘½ä»¤è°ƒç”¨ã€‚</li>
<li><strong>Docker å®¢æˆ·ç«¯ï¼Œä¹Ÿå« dockerï¼Œæ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·ä¸ Docker äº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯å°†å‘½ä»¤å‘é€ç»™å®ˆæŠ¤è¿›ç¨‹ã€‚å‘½ä»¤ä¼šéµå¾ª Docker Engine API é¡µé¢å­˜æ¡£å¤‡ä»½ï¼Œå­˜äºäº’è”ç½‘æ¡£æ¡ˆé¦†ã€‚</strong></li>
</ul>
<h2 id="docker-å¯¹è±¡">Docker å¯¹è±¡</h2>
<p>Docker çš„å¯¹è±¡æ˜¯æŒ‡ Imagesã€Containersã€Networksã€Volumesã€Plugins ç­‰ç­‰ã€‚</p>
<ul>
<li>å®¹å™¨ï¼ˆContainersï¼‰æ˜¯é•œåƒçš„å¯è¿è¡Œçš„å®ä¾‹ã€‚å®¹å™¨å¯é€šè¿‡ API æˆ– CLIï¼ˆå‘½ä»¤è¡Œï¼‰è¿›è¡Œæ“æ§ã€‚</li>
<li>é•œåƒï¼ˆImagesï¼‰æ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ï¼Œç”¨äºæŒ‡ç¤ºåˆ›å»ºå®¹å™¨ã€‚ é•œåƒåˆ†å±‚(layers)æ„å»ºçš„ï¼Œè€Œå®šä¹‰è¿™äº›å±‚æ¬¡çš„æ–‡ä»¶å« Dockerfileã€‚</li>
<li>æœåŠ¡ï¼ˆServicesï¼‰å…è®¸ç”¨æˆ·è·¨è¶Šä¸åŒçš„ Docker å®ˆæŠ¤è¿›ç¨‹ï¼ˆDocker daemonsï¼‰çš„æƒ…å†µä¸‹å¢åŠ å®¹å™¨ï¼Œå¹¶å°†è¿™äº›å®¹å™¨åˆ†ä¸ºç®¡ç†è€…ï¼ˆmanagersï¼‰å’Œå·¥ä½œè€…ï¼ˆworkersï¼‰ï¼Œè®©ä»–ä»¬ä¸º swarm å…±åŒå·¥ä½œã€‚</li>
</ul>
<h2 id="docker-èƒ½åšä»€ä¹ˆ">Docker èƒ½åšä»€ä¹ˆ</h2>
<ul>
<li>ä¿è¯å¼€å‘ã€æµ‹è¯•ã€äº¤ä»˜ã€éƒ¨ç½²çš„ç¯å¢ƒå®Œå…¨ä¸€è‡´</li>
<li>æŠ±æ•èµ„æºçš„éš”ç¦»</li>
<li>å¯åŠ¨ä¸´æ—¶çš„ã€ç”¨å®ŒåŠå¼ƒçš„ç¯å¢ƒï¼Œä¾‹å¦‚æµ‹è¯•</li>
<li>ç§’çº§çš„è¶…å¤§è§„æ¨¡éƒ¨ç½²å’Œæ‰©å®¹</li>
</ul>
<h2 id="docker-çš„åŸºæœ¬æ¦‚å¿µ">Docker çš„åŸºæœ¬æ¦‚å¿µ</h2>
<ul>
<li>
<p>é•œåƒ images
ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„æ¨¡æ¿æ–‡ä»¶ï¼ŒDocker å¼•æ“å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ¨¡æ¿æ–‡ä»¶å¯åŠ¨æ— æ•°ä¸ªä¸€æ¨¡ä¸€æ ·äº’ä¸å¹²æ‰°çš„å®¹å™¨ã€‚</p>
</li>
<li>
<p>å®¹å™¨ container
æ˜¯ä¸€å°è™šæ‹Ÿçš„è®¡ç®—æœºï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„</p>
<ul>
<li>
<p>ç½‘ç»œ</p>
</li>
<li>
<p>æ–‡ä»¶ç³»ç»Ÿ</p>
</li>
<li>
<p>è¿›ç¨‹</p>
<p>å®ƒé»˜è®¤å’Œå®¿ä¸»æœºä¸å‘ç”Ÿä»»ä½•äº¤äº’ï¼Œè¿™æ„å‘³ç€æ•°æ®æ˜¯æ²¡æœ‰æŒä¹…åŒ–çš„ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 id="docker-å¯¹æ¯”-vm">docker å¯¹æ¯” VM</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/vm%20versus%20docker.jpg"
        data-srcset="/vm%20versus%20docker.jpg, /vm%20versus%20docker.jpg 1.5x, /vm%20versus%20docker.jpg 2x"
        data-sizes="auto"
        alt="/vm%20versus%20docker.jpg"
        title="/vm%20versus%20docker.jpg" /></p>
<h3 id="docker-pullimages">docker pull/images</h3>
<ul>
<li><code>docker pull</code>æ˜¯ä¸‹è½½ä¸€ä¸ªæŒ‡å®šçš„é•œåƒï¼Œæ–¹ä¾¿éšæ—¶å¯åŠ¨ã€‚ä¾‹å¦‚ï¼šdocker pull mysqlï¼š6.7.28 ä¸‹è½½ä¸€ä¸ª mysql ç‰ˆæœ¬ä¸º 5.7.28ã€‚</li>
<li><code>docker images</code>äº§çœ‹æœ¬åœ°å·²ç»æœ‰çš„é•œåƒã€‚</li>
</ul>
<h3 id="docker-runps">docker run/ps</h3>
<ul>
<li><code>docker run</code>è£…è½½é•œåƒæˆä¸ºä¸€ä¸ªå®¹å™¨ã€‚
<ul>
<li>å°±å¥½åƒä»è›‹ç³•æ¨¡å­åšå‡ºæ¥ä¸€ä¸ªè›‹ç³•</li>
<li>åœ¨è¿™ä¸ªå®¹å™¨çœ‹æ¥ï¼Œè‡ªå·±å°±æ˜¯ä¸€å°ç‹¬ç«‹çš„è®¡ç®—æœº</li>
<li>æ¯ä¸ªå®¹å™¨æœ‰ä¸€ä¸ª IDï¼Œæ”¯æŒç¼©å†™ï¼Œä¾‹å¦‚å®¹å™¨ id æ˜¯ 234sdhfsakjhfï¼Œå°±å¯ä»¥ç®€å†™ä¸º 234s</li>
</ul>
</li>
<li><code>docker run -it &lt;é•œåƒå&gt; &lt;é•œåƒä¸­è¦è¿è¡Œçš„å‘½ä»¤å’Œå‚æ•°&gt;</code>
<ul>
<li>äº¤äº’å¼å‘½ä»¤è¡Œï¼Œå½“å‰ shell ä¸­è¿è¡Œï¼ŒCTRL+c é€€å‡º</li>
</ul>
</li>
<li><code>docker run -d &lt;é•œåƒå&gt; &lt;é•œåƒä¸­è¦è¿è¡Œçš„å‘½ä»¤å’Œå‚æ•°&gt;</code>
<ul>
<li>daemon æ¨¡å¼ï¼Œåœ¨åå°è¿è¡Œå®¹å™¨</li>
</ul>
</li>
</ul>
<h4 id="docker-run">docker run</h4>
<ul>
<li><code>--name</code>ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåå­—</li>
<li><code>--restart=always</code>é‡åˆ°é”™è¯¯è‡ªåŠ¨é‡å¯</li>
<li><code>-v &lt;æœ¬åœ°æ–‡ä»¶&gt;:&lt;å®¹å™¨æ–‡ä»¶&gt;</code></li>
<li><code>-p &lt;æœ¬åœ°ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;</code></li>
<li><code>-e NAME=VALUE</code></li>
</ul>
<h3 id="docker-startstop">docker start/stop</h3>
<ul>
<li>å¯åŠ¨/åœæ­¢ä¸€ä¸ªå®¹å™¨
<ul>
<li>å¯ä»¥æƒ³è±¡ä¸ºå¼€å…³æœº</li>
</ul>
</li>
</ul>
<h3 id="docker-rm">docker rm</h3>
<ul>
<li>åˆ é™¤ä¸€ä¸ªå®¹å™¨
<ul>
<li>æƒ³è±¡æˆå°†ç”µè„‘ä¸¢æ‰</li>
</ul>
</li>
<li><code>docker rm -f &lt;å®¹å™¨åæˆ–id&gt;</code> å¼ºåˆ¶åˆ é™¤æŸä¸ªå®¹å™¨</li>
</ul>
<h3 id="docker-exec">docker exec</h3>
<ul>
<li>æŒ‡å®šç›®æ ‡å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤
<ul>
<li><code>docker run -it &lt;ç›®æ ‡å®¹å™¨ID&gt; &lt;ç›®æ ‡å‘½ä»¤(é€šå¸¸ä¸ºbash)&gt;</code></li>
</ul>
</li>
<li>è°ƒè¯•ã€è§£å†³é—®é¢˜å¿…å¤‡å‘½ä»¤</li>
</ul>
<h3 id="docker-logs">docker logs</h3>
<ul>
<li><code>docker logs&lt;å®¹å™¨IDæˆ–å®¹å™¨å&gt;</code>
<ul>
<li>æŸ¥çœ‹ç›®æ ‡å®¹å™¨çš„è¾“å‡º</li>
</ul>
</li>
<li><code>docker logs -f&lt;å®¹å™¨IDæˆ–å®¹å™¨å&gt;</code></li>
</ul>
<h3 id="docker-inspect">docker inspect</h3>
<ul>
<li>é«˜çº§å‘½ä»¤ï¼šæŸ¥çœ‹å®¹å™¨çš„è¯¦ç»†çŠ¶æ€(json æ ¼å¼)</li>
</ul>
<h2 id="docker-åˆ†å±‚çš„é•œåƒ">Docker åˆ†å±‚çš„é•œåƒ</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/mirror.jpg"
        data-srcset="/mirror.jpg, /mirror.jpg 1.5x, /mirror.jpg 2x"
        data-sizes="auto"
        alt="/mirror.jpg"
        title="/mirror.jpg" /></p>
<p><strong>åˆ†å±‚çš„é•œåƒå®ç°äº† docker å®¹å™¨çš„å¤ç”¨ã€‚</strong></p>
<h3 id="dockerfile">Dockerfile</h3>
<ul>
<li>
<p>æŒ‡å®šé•œåƒå¦‚ä½•ç”Ÿæˆ</p>
</li>
<li>
<p>ç¼–å†™ä¸€ä¸ª Dockerfile</p>
<ul>
<li>åœ¨ Docker ä¸­åˆ›å»ºé•œåƒæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ Dockerfileã€‚Dockerfile æ˜¯ä¸€ä¸ª Docker é•œåƒçš„æè¿°æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£æˆç«ç®­å‘å°„çš„ Aã€Bã€Cã€Dâ€¦çš„æ­¥éª¤ã€‚Dockerfile å…¶å†…éƒ¨åŒ…å«äº†ä¸€æ¡æ¡çš„æŒ‡ä»¤ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile">  <span class="c1">#åŸºäºcentosé•œåƒ</span><span class="err">
</span><span class="err"></span>  FROM centos<span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#ç»´æŠ¤äººçš„ä¿¡æ¯</span><span class="err">
</span><span class="err"></span>  MAINTAINER The CentOS Project &lt;xxxx@xxx.com&gt;<span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#å®‰è£…httpdè½¯ä»¶åŒ…</span><span class="err">
</span><span class="err"></span>  RUN yum -y update<span class="err">
</span><span class="err"></span>  RUN yum -y install httpd<span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#å¼€å¯80ç«¯å£</span><span class="err">
</span><span class="err"></span>  EXPOSE <span class="m">80</span><span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#å¤åˆ¶ç½‘ç«™é¦–é¡µæ–‡ä»¶è‡³é•œåƒä¸­webç«™ç‚¹ä¸‹</span><span class="err">
</span><span class="err"></span>  ADD index.html /var/www/html/index.html<span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#å¤åˆ¶è¯¥è„šæœ¬è‡³é•œåƒä¸­ï¼Œå¹¶ä¿®æ”¹å…¶æƒé™</span><span class="err">
</span><span class="err"></span>  ADD run.sh /run.sh<span class="err">
</span><span class="err"></span>  RUN chmod <span class="m">775</span> /run.sh<span class="err">
</span><span class="err">
</span><span class="err"></span>  <span class="c1">#å½“å¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶</span><span class="err">
</span><span class="err"></span>  CMD <span class="o">[</span><span class="s2">&#34;/run.sh&#34;</span><span class="o">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>docker build .</code> ä»¥å½“å‰ç›®å½•å»ºç«‹ä¸€ä¸ªé•œåƒ image</p>
</li>
<li>
<p>æ¯ä¸ªé•œåƒéƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ id</p>
</li>
</ul>
<h3 id="docker-çš„é•œåƒä»“åº“ä¸-tag">Docker çš„é•œåƒä»“åº“ä¸ tag</h3>
<ul>
<li>å¯ä»¥ä»»æ„å¯¹é•œåƒè¿›â¾ tag æ“ä½œ
<ul>
<li>å†³å®šäº†æœªæ¥è¿™ä¸ªé•œåƒä¼šè¢« push åˆ°å“ªâ¾¥</li>
<li>å†³å®šäº†æœªæ¥ä»å“ªâ¾¥ä¸‹è½½é•œåƒ</li>
</ul>
</li>
<li>å¯ä»¥â½…ä¾¿çš„åˆ›å»ºé•œåƒä»“åº“çš„ç§æœ
<ul>
<li><code>--registry-mirror</code></li>
<li><code>--insecure-registry</code></li>
</ul>
</li>
</ul>
<h2 id="docker-ä¸-kubernetesk8s">Docker ä¸ Kubernetes(k8s)</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dockerk8s.jpg"
        data-srcset="/dockerk8s.jpg, /dockerk8s.jpg 1.5x, /dockerk8s.jpg 2x"
        data-sizes="auto"
        alt="/dockerk8s.jpg"
        title="/dockerk8s.jpg" /><br>
ä¸šç•Œæœ‰ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»</p>
<ul>
<li>ä¼ ç»ŸæœåŠ¡è¢«æ¯”ä½œå® ç‰© petsï¼Œæ„æ€æ˜¯å½“å¯¹å¤–çš„æœåŠ¡å‡ºäº†é—®é¢˜ï¼Œå® ç‰©æ„å‘³ç€ä½ è¦å°½å¿ƒå°½åŠ›çš„ç»´æŠ¤å®ƒï¼Œç›´åˆ°å®ƒå¥åº·æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</li>
<li>å½“åŸºäº docker çš„ k8s å‡ºç°åï¼ŒæœåŠ¡å°±è¢«æ¯”ä½œ cattleï¼Œæ„æ€å°±æ˜¯ç‰²ç•œï¼Œå½“ç‰²ç•œå‡ºç°äº†é—®é¢˜ï¼Œå°±æŠŠä»–æ€æ‰å†æ¥ä¸€åªé¡¶æ›¿(æ€æ‰å®¹å™¨&amp;&amp;é‡æ–°å¯åŠ¨å®¹å™¨)ï¼Œè€Œä¸”æˆæœ¬å¾ˆä½ã€‚</li>
</ul>
<h3 id="k8s">k8s</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/docker%20versus%20kubernetes.jpg"
        data-srcset="/docker%20versus%20kubernetes.jpg, /docker%20versus%20kubernetes.jpg 1.5x, /docker%20versus%20kubernetes.jpg 2x"
        data-sizes="auto"
        alt="/docker%20versus%20kubernetes.jpg"
        title="/docker%20versus%20kubernetes.jpg" /></p>
<ul>
<li>kubernetes master ä¸»èŠ‚ç‚¹ ç”¨äºç®¡ç† Node</li>
<li>Node å­èŠ‚ç‚¹ï¼Œé‡Œé¢å­˜æ”¾
<ul>
<li>kubelet å½“å‰èŠ‚ç‚¹çš„ç®¡ç†å‘˜</li>
<li>Kube-proxy æä¾›ç½‘ç»œæœåŠ¡</li>
<li>Pod å°±å¯ä»¥ç†è§£ä¸ºä¸Šé¢æ‰€è¯´çš„ cattleï¼Œé‡Œé¢è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª docker å®¹å™¨ï¼Œå½“ä»–ä»¬å…¶ä¸­æœ‰ä¸ªåˆ«å‡ºäº†é—®é¢˜ï¼Œå°±æ€æ‰é‡å¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>k8s æä¾›è‡ªåŠ¨æ»šåŠ¨æ›´æ–°(rolling update) æœåŠ¡ï¼Œå¯ä»¥ä¿è¯ä½ çš„æœåŠ¡åœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­ä¸è¢«æ›´æ–°ä¸­æ–­</strong></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2020-10-19</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="/docker%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" data-title="DockeråŸç†åŠå…¶åº”ç”¨"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="prev" rel="prev" title="æ­£åˆ™è¡¨è¾¾å¼"><i class="fas fa-angle-left fa-fw"></i>æ­£åˆ™è¡¨è¾¾å¼</a>
            <a href="/ajax/" class="next" rel="next" title="Ajax">Ajax<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.1">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">ä½œè€…</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"cookieconsent":{"content":{"dismiss":"åŒæ„","link":"äº†è§£æ›´å¤š","message":"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒ."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
